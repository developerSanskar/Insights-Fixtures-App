[
 {
  "chart": "sjv031de3n",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.025,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 100,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-05-22 07:52:18.495504",
  "limit": 500,
  "modified": "2024-05-21 16:33:40.372826",
  "name": "QRY-0001",
  "result_name": "sjv1rs3c2s",
  "results_row_count": 1,
  "script": null,
  "script_log": null,
  "sql": "SELECT count(*) AS `Total Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n LIMIT 100",
  "status": "Execution Successful",
  "tables": [],
  "title": "Total Customers Visual Query",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "gi55gb6bbk",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 56.954,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"group by\",\n   \"alias\": \"Item Code\",\n   \"column\": \"item_code\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Item Code\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabSales Invoice Item\",\n   \"type\": \"String\"\n  },\n  {\n   \"aggregation\": \"sum\",\n   \"alias\": \"Refills\",\n   \"column\": \"qty\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Refills\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabSales Invoice Item\",\n   \"type\": \"Decimal\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Type Of Customer\",\n   \"column\": \"type_of_customer\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Type Of Customer\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  },\n  {\n   \"aggregation\": \"distinct_count\",\n   \"alias\": \"Customer\",\n   \"column\": \"customer\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Customer\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabSales Invoice\",\n   \"type\": \"Decimal\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Refill Rate\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"left\": {\n      \"arguments\": [\n       {\n        \"type\": \"Column\",\n        \"value\": {\n         \"column\": \"qty\",\n         \"table\": \"tabSales Invoice Item\"\n        }\n       }\n      ],\n      \"function\": \"sum\",\n      \"type\": \"CallExpression\"\n     },\n     \"operator\": \"/\",\n     \"right\": {\n      \"arguments\": [\n       {\n        \"type\": \"Column\",\n        \"value\": {\n         \"column\": \"customer\",\n         \"table\": \"tabSales Invoice\"\n        }\n       }\n      ],\n      \"function\": \"distinct_count\",\n      \"type\": \"CallExpression\"\n     },\n     \"type\": \"BinaryExpression\"\n    },\n    \"raw\": \"sum(`tabSales Invoice Item.qty`)/distinct_count(`tabSales Invoice.customer`)\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Refill Rate\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [\n  {\n   \"column\": {\n    \"aggregation\": \"\",\n    \"alias\": \"\",\n    \"column\": \"\",\n    \"expression\": {},\n    \"format\": {},\n    \"granularity\": \"\",\n    \"label\": \"\",\n    \"meta\": null,\n    \"order\": \"\",\n    \"table\": \"\",\n    \"type\": \"String\"\n   },\n   \"expression\": {\n    \"ast\": {\n     \"arguments\": [\n      {\n       \"type\": \"Column\",\n       \"value\": {\n        \"column\": \"item_code\",\n        \"table\": \"tabSales Invoice Item\"\n       }\n      },\n      {\n       \"type\": \"String\",\n       \"value\": \"refill\"\n      }\n     ],\n     \"function\": \"contains\",\n     \"type\": \"CallExpression\"\n    },\n    \"raw\": \"contains(`tabSales Invoice Item.item_code`,\\\"refill\\\")\"\n   },\n   \"operator\": {\n    \"label\": \"equals\",\n    \"value\": \"=\"\n   },\n   \"value\": {\n    \"label\": null,\n    \"value\": null\n   }\n  }\n ],\n \"joins\": [\n  {\n   \"join_type\": {\n    \"label\": \"Inner Join\",\n    \"value\": \"inner\"\n   },\n   \"left_column\": {\n    \"column\": \"parent\",\n    \"label\": \"parent\",\n    \"table\": \"tabSales Invoice Item\",\n    \"value\": \"parent\"\n   },\n   \"left_table\": {\n    \"label\": \"Sales Invoice Item\",\n    \"table\": \"tabSales Invoice Item\"\n   },\n   \"right_column\": {\n    \"column\": \"name\",\n    \"label\": \"name\",\n    \"table\": \"tabSales Invoice\",\n    \"value\": \"name\"\n   },\n   \"right_table\": {\n    \"label\": \"Sales Invoice\",\n    \"table\": \"tabSales Invoice\"\n   }\n  },\n  {\n   \"join_type\": {\n    \"label\": \"Inner Join\",\n    \"value\": \"inner\"\n   },\n   \"left_column\": {\n    \"column\": \"customer\",\n    \"label\": \"customer\",\n    \"table\": \"tabSales Invoice\",\n    \"value\": \"customer\"\n   },\n   \"left_table\": {\n    \"label\": \"Sales Invoice\",\n    \"table\": \"tabSales Invoice\"\n   },\n   \"right_column\": {\n    \"column\": \"name\",\n    \"label\": \"name\",\n    \"table\": \"tabCustomer\",\n    \"value\": \"name\"\n   },\n   \"right_table\": {\n    \"label\": \"Customer\",\n    \"table\": \"tabCustomer\"\n   }\n  }\n ],\n \"limit\": 10000000,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Sales Invoice Item\",\n  \"table\": \"tabSales Invoice Item\"\n }\n}",
  "last_execution": "2024-07-12 10:12:50.645508",
  "limit": 500,
  "modified": "2024-07-12 10:12:51.480108",
  "name": "QRY-0084",
  "result_name": "gi554duj6r",
  "results_row_count": 1316,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabSales Invoice Item`.item_code AS `Item Code`,\n       `tabCustomer`.type_of_customer AS `Type Of Customer`,\n       sum(`tabSales Invoice Item`.qty) AS `Refills`,\n       count(DISTINCT `tabSales Invoice`.customer) AS `Customer`,\n       sum(`tabSales Invoice Item`.qty) / count(DISTINCT `tabSales Invoice`.customer) AS `Refill Rate`\n  FROM `tabSales Invoice Item` AS `tabSales Invoice Item`\n INNER JOIN `tabSales Invoice` AS `tabSales Invoice`\n    ON `tabSales Invoice Item`.parent = `tabSales Invoice`.name\n INNER JOIN `tabCustomer` AS `tabCustomer`\n    ON `tabSales Invoice`.customer = `tabCustomer`.name\n WHERE `tabSales Invoice Item`.item_code LIKE '%%refill%%'\n GROUP BY `tabSales Invoice Item`.item_code,\n          `tabCustomer`.type_of_customer\n LIMIT 10000000",
  "status": "Execution Successful",
  "tables": [],
  "title": "Average # of refill SKUs per Customer Type ",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "skgqcgg072",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.26,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Lead Source\",\n   \"column\": \"lead_source\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Lead Source\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 100,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:05.852521",
  "limit": 500,
  "modified": "2024-05-22 16:36:49.713546",
  "name": "QRY-0003",
  "result_name": "skgrpnm6k8",
  "results_row_count": 6,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabCustomer`.lead_source AS `Lead Source`,\n       count(*) AS `Total Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n GROUP BY `tabCustomer`.lead_source\n LIMIT 100",
  "status": "Execution Successful",
  "tables": [],
  "title": "Lead Source Visual Query",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "skto1ectjm",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.02,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Lead Source\",\n   \"column\": \"lead_source\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Lead Source\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Referral Rate\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"left\": {\n      \"left\": {\n       \"arguments\": [\n        {\n         \"type\": \"Column\",\n         \"value\": {\n          \"column\": \"name\",\n          \"table\": \"tabCustomer\"\n         }\n        }\n       ],\n       \"function\": \"count\",\n       \"type\": \"CallExpression\"\n      },\n      \"operator\": \"/\",\n      \"right\": {\n       \"arguments\": [\n        {\n         \"type\": \"String\",\n         \"value\": \"SUM(COUNT(*)) OVER ()\"\n        }\n       ],\n       \"function\": \"sql\",\n       \"type\": \"CallExpression\"\n      },\n      \"type\": \"BinaryExpression\"\n     },\n     \"operator\": \"*\",\n     \"right\": {\n      \"type\": \"Number\",\n      \"value\": 100\n     },\n     \"type\": \"BinaryExpression\"\n    },\n    \"raw\": \"count(`tabCustomer.name`)/sql(\\\"SUM(COUNT(*)) OVER ()\\\")*100\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Referral Rate\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 10000000,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-05-22 12:59:17.510030",
  "limit": 500,
  "modified": "2024-05-22 08:04:42.361264",
  "name": "QRY-0005",
  "result_name": "sktpujg09d",
  "results_row_count": 4,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabCustomer`.lead_source AS `Lead Source`,\n       count(*) AS `Total Customers`,\n       (count(*) / SUM(COUNT(*)) OVER ()) * 100 AS `Referral Rate`\n  FROM `tabCustomer` AS `tabCustomer`\n GROUP BY `tabCustomer`.lead_source\n LIMIT 10000000",
  "status": "Execution Successful",
  "tables": [],
  "title": "Customer Referral Rate Visual Query  ",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "sk9os9e458",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.309,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Status\",\n   \"column\": \"status\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Status\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 10000000,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:03.664225",
  "limit": 500,
  "modified": "2024-05-22 08:16:46.911930",
  "name": "QRY-0002",
  "result_name": "sk9opkl4du",
  "results_row_count": 5,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabCustomer`.status AS `Status`,\n       count(*) AS `Total Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n GROUP BY `tabCustomer`.status\n LIMIT 10000000",
  "status": "Execution Successful",
  "tables": [],
  "title": "Status of Customer Visual Query",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "sknq9lil2u",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.387,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"group by\",\n   \"alias\": \"Type Of Customer\",\n   \"column\": \"type_of_customer\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Type Of Customer\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 10000000,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:03.699832",
  "limit": 500,
  "modified": "2024-05-24 09:45:21.737469",
  "name": "QRY-0004",
  "result_name": "sknr5of3hr",
  "results_row_count": 7,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabCustomer`.type_of_customer AS `Type Of Customer`,\n       count(*) AS `Total Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n GROUP BY `tabCustomer`.type_of_customer\n LIMIT 10000000",
  "status": "Execution Successful",
  "tables": [],
  "title": "Type of Customer Visual Query",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "j5ntin9onk",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.275,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Referral Rate\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"left\": {\n      \"left\": {\n       \"arguments\": [\n        {\n         \"left\": {\n          \"type\": \"Column\",\n          \"value\": {\n           \"column\": \"lead_source\",\n           \"table\": \"tabCustomer\"\n          }\n         },\n         \"operator\": \"=\",\n         \"right\": {\n          \"type\": \"String\",\n          \"value\": \"Customer Referral\"\n         },\n         \"type\": \"BinaryExpression\"\n        }\n       ],\n       \"function\": \"count_if\",\n       \"type\": \"CallExpression\"\n      },\n      \"operator\": \"/\",\n      \"right\": {\n       \"arguments\": [\n        {\n         \"type\": \"Column\",\n         \"value\": {\n          \"column\": \"name\",\n          \"table\": \"tabCustomer\"\n         }\n        }\n       ],\n       \"function\": \"count\",\n       \"type\": \"CallExpression\"\n      },\n      \"type\": \"BinaryExpression\"\n     },\n     \"operator\": \"*\",\n     \"right\": {\n      \"type\": \"Number\",\n      \"value\": 100\n     },\n     \"type\": \"BinaryExpression\"\n    },\n    \"raw\": \"count_if(`tabCustomer.lead_source` = 'Customer Referral')/count(`tabCustomer.name`)*100\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Referral Rate\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 100,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:04.869017",
  "limit": 500,
  "modified": "2024-05-22 16:36:30.616072",
  "name": "QRY-0015",
  "result_name": "j5ntfj7av1",
  "results_row_count": 1,
  "script": null,
  "script_log": null,
  "sql": "SELECT (sum(CASE WHEN (`tabCustomer`.lead_source = 'Customer Referral') THEN 1 ELSE 0 END) / count(*)) * 100 AS `Referral Rate`\n  FROM `tabCustomer` AS `tabCustomer`\n LIMIT 100",
  "status": "Execution Successful",
  "tables": [],
  "title": "Customer Referral Rate   ",
  "transforms": [],
  "variables": []
 },
 {
  "chart": "dkie43230p",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.258,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Total Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Total Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Active Customers\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"arguments\": [\n      {\n       \"left\": {\n        \"type\": \"Column\",\n        \"value\": {\n         \"column\": \"status\",\n         \"table\": \"tabCustomer\"\n        }\n       },\n       \"operator\": \"=\",\n       \"right\": {\n        \"type\": \"String\",\n        \"value\": \"Active\"\n       },\n       \"type\": \"BinaryExpression\"\n      }\n     ],\n     \"function\": \"count_if\",\n     \"type\": \"CallExpression\"\n    },\n    \"raw\": \"count_if(`tabCustomer.status` = 'Active')\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Active Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Referral rate\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"left\": {\n      \"left\": {\n       \"arguments\": [\n        {\n         \"left\": {\n          \"type\": \"Column\",\n          \"value\": {\n           \"column\": \"status\",\n           \"table\": \"tabCustomer\"\n          }\n         },\n         \"operator\": \"=\",\n         \"right\": {\n          \"type\": \"String\",\n          \"value\": \"Active\"\n         },\n         \"type\": \"BinaryExpression\"\n        }\n       ],\n       \"function\": \"count_if\",\n       \"type\": \"CallExpression\"\n      },\n      \"operator\": \"/\",\n      \"right\": {\n       \"arguments\": [\n        {\n         \"type\": \"Column\",\n         \"value\": {\n          \"column\": \"name\",\n          \"table\": \"tabCustomer\"\n         }\n        }\n       ],\n       \"function\": \"count\",\n       \"type\": \"CallExpression\"\n      },\n      \"type\": \"BinaryExpression\"\n     },\n     \"operator\": \"*\",\n     \"right\": {\n      \"type\": \"Number\",\n      \"value\": 100\n     },\n     \"type\": \"BinaryExpression\"\n    },\n    \"raw\": \"count_if(`tabCustomer.status` = 'Active')/count(`tabCustomer.name`)*100\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Referral rate\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"New Customers\",\n   \"column\": \"\",\n   \"expression\": {\n    \"ast\": {\n     \"left\": {\n      \"arguments\": [\n       {\n        \"type\": \"Column\",\n        \"value\": {\n         \"column\": \"name\",\n         \"table\": \"tabCustomer\"\n        }\n       }\n      ],\n      \"function\": \"count\",\n      \"type\": \"CallExpression\"\n     },\n     \"operator\": \"-\",\n     \"right\": {\n      \"arguments\": [\n       {\n        \"left\": {\n         \"type\": \"Column\",\n         \"value\": {\n          \"column\": \"status\",\n          \"table\": \"tabCustomer\"\n         }\n        },\n        \"operator\": \"=\",\n        \"right\": {\n         \"type\": \"String\",\n         \"value\": \"Active\"\n        },\n        \"type\": \"BinaryExpression\"\n       }\n      ],\n      \"function\": \"count_if\",\n      \"type\": \"CallExpression\"\n     },\n     \"type\": \"BinaryExpression\"\n    },\n    \"raw\": \"count(`tabCustomer.name`)-count_if(`tabCustomer.status` = 'Active')\"\n   },\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"New Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"\",\n   \"type\": \"Decimal\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 10000000,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:04.722325",
  "limit": 500,
  "modified": "2024-05-22 16:40:04.025278",
  "name": "QRY-0012",
  "result_name": "dkiemv055o",
  "results_row_count": 1,
  "script": null,
  "script_log": null,
  "sql": "SELECT count(*) AS `Total Customers`,\n       sum(CASE WHEN (`tabCustomer`.status = 'Active') THEN 1 ELSE 0 END) AS `Active Customers`,\n       (sum(CASE WHEN (`tabCustomer`.status = 'Active') THEN 1 ELSE 0 END) / count(*)) * 100 AS `Referral rate`,\n       count(*) - sum(CASE WHEN (`tabCustomer`.status = 'Active') THEN 1 ELSE 0 END) AS `New Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n LIMIT 10000000",
  "status": "Execution Successful",
  "tables": [],
  "title": "Referral Rate Visual Query",
  "transforms": [
   {
    "options": "{}",
    "parent": "QRY-0012",
    "parentfield": "transforms",
    "parenttype": "Insights Query",
    "type": ""
   }
  ],
  "variables": []
 },
 {
  "chart": "n4rtmnnsbt",
  "columns": [],
  "data_source": "Site DB",
  "docstatus": 0,
  "doctype": "Insights Query",
  "execution_time": 0.28,
  "filters": "{\n\t\"type\": \"LogicalExpression\",\n\t\"operator\": \"&&\",\n\t\"level\": 1,\n\t\"position\": 1,\n\t\"conditions\": []\n}",
  "is_assisted_query": 1,
  "is_native_query": 0,
  "is_saved_as_table": 1,
  "is_script_query": 0,
  "is_stored": 0,
  "json": "{\n \"calculations\": [],\n \"columns\": [\n  {\n   \"aggregation\": \"count\",\n   \"alias\": \"Customers\",\n   \"column\": \"count\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Customers\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"Integer\"\n  },\n  {\n   \"aggregation\": \"\",\n   \"alias\": \"Referral Company\",\n   \"column\": \"referral_company\",\n   \"expression\": {},\n   \"format\": {},\n   \"granularity\": \"\",\n   \"label\": \"Referral Company\",\n   \"meta\": null,\n   \"order\": \"\",\n   \"table\": \"tabCustomer\",\n   \"type\": \"String\"\n  }\n ],\n \"dimensions\": [],\n \"filters\": [],\n \"joins\": [],\n \"limit\": 100,\n \"measures\": [],\n \"orders\": [],\n \"table\": {\n  \"label\": \"Customer\",\n  \"table\": \"tabCustomer\"\n }\n}",
  "last_execution": "2024-07-12 10:12:05.993856",
  "limit": 500,
  "modified": "2024-05-24 15:48:03.112439",
  "name": "QRY-0016",
  "result_name": "n4rta25on1",
  "results_row_count": 100,
  "script": null,
  "script_log": null,
  "sql": "SELECT `tabCustomer`.referral_company AS `Referral Company`,\n       count(*) AS `Customers`\n  FROM `tabCustomer` AS `tabCustomer`\n GROUP BY `tabCustomer`.referral_company\n LIMIT 100",
  "status": "Execution Successful",
  "tables": [],
  "title": "Franchise wise Customers",
  "transforms": [],
  "variables": []
 }
]